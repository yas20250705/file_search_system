ファイル検索システム 取扱説明書

========================================

## 1. 概要

このアプリケーションは、指定したフォルダ内にあるファイルを全文検索するためのシステムです。
PDF、Office文書（Word, Excel, PowerPoint）、テキストファイルなど、様々な形式のファイルから内容を抽出し、高速に検索することができます。


## 2. 起動方法

1.  プロジェクトのルートディレクトリで、ターミナル（コマンドプロンプトやPowerShell）を開きます。
2.  以下のコマンドを実行して、Webサーバーを起動します。

    ```
    uvicorn main:app --reload
    ```

3.  サーバーが起動したら、Webブラウザで `http://127.0.0.1:8000` にアクセスしてください。

※注意：アプリケーションを起動するたびに、既存のデータベース(`file_index.db`)は自動的に削除され、新しいものに作り直されます。これにより、常に最新の状態でアプリケーションを開始できます。


## 3. 使用方法

### 3.1. 設定ページ (`/settings`)

アプリケーションを初めて使用する際や、検索対象を変更したい場合は、まず設定ページにアクセスします。
画面上部の「設定」リンクから移動できます。

#### 検索対象ディレクトリの設定

-   「検索対象ディレクトリ」の入力欄に、検索したいファイルが保存されているフォルダのフルパスを入力します。（例: `C:\Users\YourName\Documents`）
-   過去に入力したディレクトリは、ドロップダウンリストから選択することもできます。

#### 検索対象の拡張子の設定

-   検索対象としたいファイルの拡張子にチェックを入れます。
-   一般的なテキストファイルやドキュメントファイルがデフォルトで用意されています。

#### 設定の保存

-   ディレクトリと拡張子を設定したら、「設定を保存」ボタンをクリックします。


### 3.2. インデックスの作成

検索を実行する前に、ファイルの「インデックス」を作成する必要があります。インデックスは、高速な検索を実現するための索引データです。

1.  設定ページで、「今すぐインデックスを作成」ボタンをクリックします。
2.  インデックス作成がバックグラウンドで開始されます。進捗状況は画面に表示されます。
    -   「ステータス」が `completed` になれば完了です。
3.  インデックス作成を途中で止めたい場合は、「インデックス作成を中止」ボタンをクリックしてください。

※検索対象のファイルを追加・更新した場合は、再度インデックスを作成し直してください。


### 3.3. 検索ページ (トップページ `/`)

インデックス作成が完了したら、画面上部の「検索」リンクからトップページに戻り、ファイルを検索できます。

1.  検索ボックスにキーワードを入力し、「検索」ボタンをクリックするか、Enterキーを押します。
2.  検索結果が、ファイルパスと、キーワードを含む内容の一部（スニペット）と共に一覧表示されます。
    -   キーワードは `<b>` タグで強調表示されます。
3.  ファイルパスをクリックすると、PC上でそのファイルが（関連付けられたアプリケーションで）開きます。


## 4. ファイル構成

-   `main.py`: アプリケーションのメインプログラムです。
-   `database.py`: データベースの接続とテーブル作成を管理します。
-   `indexer.py`: ファイルの内容を読み取り、データベースにインデックスを作成します。
-   `file_index.db`: ファイルのインデックスが保存されるデータベースファイルです。アプリ起動時に自動生成されます。
-   `app.log`: アプリケーションの動作ログが出力されるファイルです。エラー発生時の調査に役立ちます。
-   `templates/`: HTMLテンプレートが格納されています。
-   `static/`: CSSファイルが格納されています。
-   `manual.txt`: この取扱説明書です。